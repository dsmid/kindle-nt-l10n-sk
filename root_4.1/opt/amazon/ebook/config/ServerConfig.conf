#
# ServerConfig.conf
#
# Copyright (c) 2009-2011 Amazon Technologies, Inc.  All rights reserved.  
# 
# PROPRIETARY/CONFIDENTIAL
# 
# Use is subject to license terms.
#

#
# This 'Java property file' format file has all the configuration items that may be changed
# dynamically by the server.  At this point, it consists mostly of server command URLs
# and their parameter lists.
#
# Parameter lists are documented by index and name.  The URLUtil.buildCommand() method
# may be used to read the command and parameters, and associate them with a passed-in
# array of arguments (which is why index is significant).  null arguments will result 
# in a given parameter not being used at all.
# extra arguments will be added to the end of the URL (i.e. '...&param=arg&foo&bar')
#
# Commands have 3 elements: 1) The command itself, referenced by the base key, 
# 2) The server key name, referenced by the base key + ".urlkey" OR the server name, referenced by the base key + ".url"
# 3) (optional) a list of parameters, referenced by the base key + ".params"
# 4) (optional) a list of 'global' parameters, whose values are supplied by the device, referenced by the base key + ".global.params"
# All commands should start with "cmd.", URLs should start with "url."
#
# Global params can only be from this list:
# software_rev, patch_rev, prl_rev, prl_patch_rev, patchVersion,
# X-DeviceType, X-DeviceFirmwareVersion, X-DSN, X-Anonymous-Tag,
# currentTransportMethod, currentCountry, currentMCC, currentSponsoredHotspot
# 

#
# getDevicesWithCollections
# Args: 0 (filter) - should be one of: null (all), 'registered' or 'deregistered'
#
cmd.get.devices=getAllDevicesWithCollections
cmd.get.devices.urlkey=url.cde
cmd.get.devices.params=filter
cmd.get.devices.global.params=currentTransportMethod,currentCountry,currentMCC,currentSponsoredHotspot

#
# getCollections  
# Args: 0 (serialNumber) - Device serial number 
#       1 (deviceType) - Device type
#
cmd.get.collections=getCollections
cmd.get.collections.urlkey=url.cde
cmd.get.collections.params=serialNumber,deviceType
cmd.get.collections.global.params=currentTransportMethod,currentCountry,currentMCC,currentSponsoredHotspot

#
# registerDevice
# Args: 0 (deviceType) - Device Type, see https://w.amazon.com/index.php/DevicePlatform/DeviceRegistry
#       1 (deviceSerialNumber) - Device serial number
#       2 (email) - User's email address (Amazon account)
#       3 (password) - User's Amazon account password
#       4 (deviceName) - Device's nickname (optional)
#       5 (softwareVersion/software_rev) - [GLOBAL] Device software version (optional) 
#       6 (pid) - Device PID
#       7 (device_model) - Device model (optional, used only by Klamath) 
#       8 (os_version) - OS version of the device (optional, used only by Klamath) 
#
cmd.registerDevice=registerDevice
cmd.registerDevice.urlkey=url.firs.unauth
cmd.registerDevice.params=deviceType,deviceSerialNumber,email,password,deviceName,pid,device_model,os_version
cmd.registerDevice.global.params=software_rev,currentTransportMethod,currentCountry,currentMCC,currentSponsoredHotspot

#
# getNames
# Args: 0 (pid) - Device PID
#       1 (reason) - optional reason code, should be null or 'no_state'
#
cmd.get.registration=getNamesForFiona
cmd.get.registration.urlkey=url.firs
cmd.get.registration.params=pid,reason
cmd.get.registration.global.params=currentTransportMethod,currentCountry,currentMCC,currentSponsoredHotspot

#
# renameDevice
# Args: 0 (nickname) - New device name
#
cmd.rename.device=renameFiona
cmd.rename.device.urlkey=url.firs
cmd.rename.device.params=nickname
cmd.rename.device.global.params=currentTransportMethod,currentCountry,currentMCC,currentSponsoredHotspot

#
# deregisterFiona
# Args: None
#
cmd.deregistration=disownFiona
cmd.deregistration.urlkey=url.firs
cmd.deregistration.params=contentDeleted
cmd.deregistration.global.params=currentTransportMethod,currentCountry,currentMCC,currentSponsoredHotspot

#
# getNewDeviceCredentials
# This call is unauthenticated, so we need to use the FiRS unauthenticated URL.
# See: https://w.amazon.com/index.php/DevicePlatform/DeviceRegistration/ExternalAPI#getNewDeviceCredentials
#
# Args: 0 (deviceType) - Device Type, see https://w.amazon.com/index.php/DevicePlatform/DeviceRegistry
#       1 (deviceSerialNumber) - Device serial number
#       2 (radioId) - Radio identifier, either ESN, ICCID, or MAC address
#       3 (secret) - Shared secret between the device and server
#       4 (secondaryRadioId) - Secondary radio identifier for devices with two network
#               interfaces, either ESN, ICCID, or MAC address
#       5 (softwareVersion/software_rev) - [GLOBAL] Device software version (optional) 
#       6 (reason) - "NoState" or anything else (optional)
#
cmd.get.newDeviceCredentials=getNewDeviceCredentials
cmd.get.newDeviceCredentials.urlkey=url.firs.unauth
cmd.get.newDeviceCredentials.params=deviceType,deviceSerialNumber,radioId,secret,secondaryRadioId,reason
cmd.get.newDeviceCredentials.global.params=software_rev,currentTransportMethod,currentCountry,currentMCC,currentSponsoredHotspot

#
# getDeviceCredentials
# This call is authenticated, unlike the getNewDeviceCredentials call, so
# existing certificates are needed.
# See: https://w.amazon.com/index.php/DevicePlatform/DeviceRegistration/ExternalAPI#getDeviceCredentials
#
# Args: 0 (reason) - "NoState" or anything else (optional)
#       1 (softwareVersion/software_rev) - [GLOBAL] Device software version (optional) 
#       
#
cmd.get.deviceCredentials=getDeviceCredentials
cmd.get.deviceCredentials.urlkey=url.firs
cmd.get.deviceCredentials.params=reason
cmd.get.deviceCredentials.global.params=software_rev,currentTransportMethod,currentCountry,currentMCC,currentSponsoredHotspot

#
# getTodoItems
# Args: 0 (count) - Max items to get
#       1 (device_lto) - Local time offset
#       2 (reason) - Reason why getItems is being called.
#
# PLEASE NOTE, SHA-2820:
# If any new ToDo key is added, please ensure dynamic configuration validate
# handles it properly. Validation occurs at TaskProcess's
# parseConfig(String newSettings);
#
cmd.get.todo.items=getItems
cmd.get.todo.items.urlkey=url.todo
cmd.get.todo.items.params=count,device_lto,reason
cmd.get.todo.items.global.params=software_rev,patch_rev,prl_rev,prl_patch_rev,currentTransportMethod,currentCountry,currentMCC,currentSponsoredHotspot

#
# removeToDoItems
# Args: 0 (todoItemReferenceId) - Server-side request identifier.
#
cmd.remove.todo.items=removeItems
cmd.remove.todo.items.urlkey=url.todo
cmd.remove.todo.items.params=todoItemReferenceId
cmd.remove.todo.items.global.params=currentTransportMethod,currentCountry,currentMCC,currentSponsoredHotspot

#
# SyncMetadata
# Args: 0 (last_sync_time) - Last sync time
#
cmd.sync.metadata=syncMetaData
cmd.sync.metadata.urlkey=url.todo
cmd.sync.metadata.params=last_sync_time
cmd.sync.metadata.global.params=currentTransportMethod,currentCountry,currentMCC,currentSponsoredHotspot

#
# getMetadata
# Args: 0 (key) - cde key
#       1 (type) - cde type
#
cmd.get.metadata=getMetaData
cmd.get.metadata.urlkey=url.todo
cmd.get.metadata.params=key,type
cmd.get.metadata.global.params=currentTransportMethod,currentCountry,currentMCC,currentSponsoredHotspot

#
# getAnnotations
# Args: 0 (key) - cde key
#       1 (type) - cde type
#       2 (guid) - guid
#       3 (filter) - filter
#
cmd.get.annotations=getAnnotations
cmd.get.annotations.urlkey=url.cde
cmd.get.annotations.params=key,type,guid,filter
cmd.get.annotations.global.params=currentTransportMethod,currentCountry,currentMCC,currentSponsoredHotspot

#
# downloadContent
# Args: 0 (key) - cde key
#       1 (type) - cde type
#       2 (version) - Content version
#       3 (is_archived_items) - Archived items flag, 1 == true, 0 == false
#       4 (todoItemReferenceId) - Server-side request identifier.
#
cmd.get.content=FSDownloadContent
cmd.get.content.urlkey=url.cde
cmd.get.content.params=key,type,version,is_archived_items,todoItemReferenceId
cmd.get.content.global.params=software_rev,patch_rev,prl_rev,prl_patch_rev,patchVersion,currentTransportMethod,currentCountry,currentMCC,currentSponsoredHotspot

#
# download Sidecar
# Args: 0 (key) - cde key (get only)
#       1 (type) - cde type (get only)
#       2 (guid) - guid for the content (get only)
#       3 (device_lto) - Local time offset (put only)
#
cmd.download.sidecar=sidecar
cmd.download.sidecar.urlkey=url.cde
cmd.download.sidecar.params=key,type,guid,device_lto
cmd.download.sidecar.global.params=currentTransportMethod,currentCountry,currentMCC,currentSponsoredHotspot

#
# upload Sidecar
# Args: 0 (key) - cde key (get only)
#       1 (type) - cde type (get only)
#       2 (device_lto) - Local time offset (put only)
#
cmd.upload.sidecar=sidecar
cmd.upload.sidecar.urlkey=url.cde
cmd.upload.sidecar.params=key,type,device_lto
cmd.upload.sidecar.global.params=currentTransportMethod,currentCountry,currentMCC,currentSponsoredHotspot

#
# send reading experience journal
#
cmd.rexp=uploadReadingExperienceJournal
cmd.rexp.urlkey=url.cde

# get popular highlight
# args: 0 (key) - cde key 
#       1 (type) - cde type
#       2 (version) - version
#       4 (guid) - guid
#       5 (update_id) - update_id
cmd.popular_highlight=getPopularHighlights
cmd.popular_highlight.urlkey=url.cde
cmd.popular_highlight.params=key,type,version,guid,update_id
cmd.popular_highlight.global.params=currentTransportMethod,currentCountry,currentMCC,currentSponsoredHotspot

# get page numbers
# args: 0 (key) - cde key 
#       1 (type) - cde type
#       2 (version) - book version
#       4 (guid) - guid
#       5 (update_id) - sidecar update_id
# get page numbers
cmd.page_numbers=getPageNumbers
cmd.page_numbers.urlkey=url.cde
cmd.page_numbers.params=key,type,version,guid,update_id

#
# sendLog
# Args: 0 (key) - Server data key
#
cmd.send.log=log
cmd.send.log.urlkey=url.cde
cmd.send.log.params=key
cmd.send.log.global.params=currentTransportMethod,currentCountry,currentMCC,currentSponsoredHotspot

#
# sendSyslog
# Args: 0 (key) - Server data key
#
cmd.send.syslog=MessageLogServlet
cmd.send.syslog.urlkey=url.det
cmd.send.syslog.params=key
cmd.send.syslog.global.params=currentTransportMethod,currentCountry,currentMCC,currentSponsoredHotspot

#
# uploadLogs - uploads non-anonymous logs
# Args: 0 (key) - Log key
#
cmd.upload.dsnLogs=DETLogServlet
cmd.upload.dsnLogs.urlkey=url.det.unauth
cmd.upload.dsnLogs.params=key
cmd.upload.dsnLogs.global.params=currentTransportMethod,currentCountry,currentMCC,currentSponsoredHotspot
cmd.upload.dsnLogs.headers=X-DeviceType,X-DeviceFirmwareVersion,X-DSN

#
# uploadLogs - uploads anonymous logs
# Args: 0 (key) - Log key
#
cmd.upload.logs=DETLogServlet
cmd.upload.logs.urlkey=url.det.unauth
cmd.upload.logs.params=key
cmd.upload.logs.global.params=currentTransportMethod,currentCountry,currentMCC,currentSponsoredHotspot
cmd.upload.logs.headers=X-DeviceType,X-DeviceFirmwareVersion,X-Anonymous-Tag

# Devicemessaging
#Args: None
#
cmd.upload.odot.item=PostDeviceMessages
cmd.upload.odot.item.urlkey=url.messaging.post
cmd.upload.odot.item.global.params=currentTransportMethod,currentCountry,currentMCC,currentSponsoredHotspot
cmd.upload.odot.item.headers=X-fsn

#
# getSearchIndex
# Args: 0 (key) - cde key
#       1 (type) - cde type
#       2 (version) - version
#       3 (random_id) - randomized id
#       4 (last_quick_search) - last search time
#       5 (index_version) - index version
#       6 (no key) - "forced_index" or null
#
cmd.get.search.index=FSDownloadSearchIndex
cmd.get.search.index.urlkey=url.cde
cmd.get.search.index.params=key,type,version,random_id,last_quick_search,index_version
cmd.get.search.index.global.params=currentTransportMethod,currentCountry,currentMCC,currentSponsoredHotspot

#
# appCheck (411)
# Args: None
#
cmd.app.check=AppCheck7
cmd.app.check.urlkey=url.cde
cmd.app.check.global.params=currentTransportMethod,currentCountry,currentMCC,currentSponsoredHotspot

#
# shareHighlightAndNote
# Args: 0 (key) - cde key
#       1 (type) - cde type
#       2 (language) - user's language preference
#       3 (version) - book version
#       4 (guid) - book GUID
#       5 (note_text) - note text to share
#       6 (note_location) - location of first character of the word the note is attached to
#       7 (highlight_text) - highlight text to share or context for the note
#       8 (highlight_start) - location of the first character of the first word of the highlight
#       9 (highlight_end) - location of the last character of the last word of the highlight
#       10 (highlight_is_default_context) - present if the highlight is the default context (not a user's highlight)
#       11 (extra) - XML containing additional book/context information
#       12 (xfsn) - device's XFSN
#
cmd.share.highlight.and.note=shareHighlightAndNote
cmd.share.highlight.and.note.urlkey=url.cde
cmd.share.highlight.and.note.params=key,type,language,version,guid,note_text,note_location,highlight_text,highlight_start,highlight_end,highlight_is_default_context,extra,xfsn
cmd.share.highlight.and.note.global.params=currentTransportMethod,currentCountry,currentMCC,currentSponsoredHotspot

#
# Sharing registration
# Args: 0 (from_book) - 0 if we are not coming from a book, 1 if we are coming from a book (used to include the special "Return to Book" link)
#
cmd.sharing.registration=social
cmd.sharing.registration.url=https://kindle.amazon.com
cmd.sharing.registration.params=from_book
cmd.sharing.registration.global.params=currentTransportMethod,currentCountry,currentMCC,currentSponsoredHotspot

#
# Sharing content length restrictions.
# A negative value turns the restriction off.
#
max.note.length=-1
max.recoverable.highlight.length=0
max.nonrecoverable.newspaper.highlight.length=1400
max.nonrecoverable.magazine.highlight.length=1400
max.nonrecoverable.feed.highlight.length=700
max.nonrecoverable.pdoc.highlight.length=700
max.social.message.length=100

#
# On-device Account creation
# Args: DSN, DeviceType
#
cmd.account.registration=gp/kw/land
cmd.account.registration.url=https://www.amazon.com
cmd.account.registration.params=dsn,deviceType
cmd.account.registration.global.params=currentTransportMethod,currentCountry,currentMCC,currentSponsoredHotspot

#
# WAN Proxy
#
# Each protocol that is proxied, needs to have the following information:
#     wan.proxy.host.<protocol> - The proxy host for this protocol. This returns a dynamic configuration property to get.
#     wan.proxy.port.<protocol> - The proxy port for this protocol. 
#     wan.proxy.non_proxy_hosts.<protocol> - A regular expression of hosts that should not go through the proxy.
#

#
# WAN HTTP Proxy
#
wan.proxy.host.http=url.fints
wan.proxy.port.http=80
wan.proxy.non_proxy_hosts.http=*.amazon.com|*.images-amazon.com|*.amazon.co.uk

#
# WAN HTTPS Proxy
#
wan.proxy.host.https=url.fints
wan.proxy.port.https=80
wan.proxy.non_proxy_hosts.https=*.amazon.com|*.images-amazon.com|*.amazon.co.uk

#
# WAN FTP Proxy
#
wan.proxy.host.ftp=url.fints
wan.proxy.port.ftp=80
wan.proxy.non_proxy_hosts.ftp=*.amazon.com|*.images-amazon.com|*.amazon.co.uk

#
# KDK Subscriptions API 
# Args: 0 (appId) - Application Id 
#
cmd.kdk.subs.status=status
cmd.kdk.subs.status.urlkey=url.kdk.subs
cmd.kdk.subs.status.params=appId
cmd.kdk.subs.status.global.params=currentTransportMethod,currentCountry,currentMCC,currentSponsoredHotspot

#
# Miscellaneous Amazon command headers (grab bag of parameters)
#
cmd.any_amazon.domains=.amazon.com,.images-amazon.com,.amazon.co.uk
cmd.any_amazon.headers=Accept-Language,X-ADP-SW

#
# websiteURL
#
url.website=https://www.amazon.com

#
# storeURL
#
url.store=https://www.amazon.com/gp/g7g/xyml1/

#
# CDE server
#
url.cde=https://cde-g7g.amazon.com/FionaCDEServiceEngine

#
# FiRS server
#
url.firs=https://firs-g7g.amazon.com/FirsProxy

#
# FiRS unauthenticated server
#
url.firs.unauth=https://firs-ta-g7g.amazon.com/FirsProxy

#
# TODO server
#
url.todo=https://todo-g7g.amazon.com/FionaTodoListProxy

#
# DET server
#
url.det=https://det-g7g.amazon.com/DeviceEventProxy

#
# DET unauthenticated server
#
url.det.unauth=https://det-ta-g7g.amazon.com/DeviceEventProxy

#
# FINTS server - Proxy
# 
# The proxy URL should only include the hostname without the protocol.
#
url.fints=fints-g7g.amazon.com

#
# KDK Subscriptions API URL
#
url.kdk.subs=https://kdk-ws.amazon.com/SubscriptionStatusProxy

#
# Store Cookie Domains (comma-delimited allowed RFC-2109 domains for the Store cookie)
#
cookie.store.domains=.amazon.com

# Post Device message URL
#
url.messaging.post=https://device-messaging-na.amazon.com

#
# Daily Ad Rotation
#
# The rotation time is hour of day and minute in UTC and the 
# window value is in seconds. 
#
ad.rotate.time=8:01
ad.rotate.window=15

#
# Ad Query Reference Time
# A timestamp can be set to override the reference time used in ad display queries. 
# Example: 2011-05-20T17:00:00+0000
# Use the value CURRENT_TIME to disable the use of the specified reference time. 
# NOTE: This config value is intended for test use only.
#
ad.reference.time=CURRENT_TIME

#
# Ember server
#
url.ember=https://www.amazon.com/gp/ember/xyml/

cmd.ember.buy=buy_ember.xml
cmd.ember.buy.urlkey=url.ember
cmd.ember.buy.params=responseType,asin,quantity,requestId

cmd.ember.cancel=cancel_ember.xml
cmd.ember.cancel.urlkey=url.ember
cmd.ember.cancel.params=responseType,orderId,asin,requestId

#
# Max number of Archived Items to download/store in device
#
max.archived.items=4500
